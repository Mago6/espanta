function generateMiniCalendar(plantId){
  const data = plantsData[plantId];
  miniCalendar.innerHTML = '';
  const today = new Date(); // Fecha real actual
  for(let week=1; week<=12; week++){
    for(let day=0; day<7; day++){
      const d = new Date(startDateValue);
      d.setDate(startDateValue.getDate() + (week-1)*7 + day);

      const box = document.createElement('div');
      box.className='day-box ' + getStageClass(getStage(week));
      box.title = `Semana ${week} - ${getStage(week)}\n${d.toLocaleDateString()}`;
      box.textContent = d.getDate();

      // Resaltar la fecha actual real
      if(today.toDateString() === d.toDateString()) {
        box.classList.add('current-day');
      }

      // Hacer clic para seleccionar semana de la planta
      box.onclick = () => {
        loadWeek(plantId, week);
      };

      miniCalendar.appendChild(box);
    }
  }
}
